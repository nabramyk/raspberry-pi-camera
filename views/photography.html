<!DOCTYPE html>
<head>
	<script>
		
		var url = 'http://localhost:8080/';
		
		function update() {
			var xmlHttp = new XMLHttpRequest();
			xmlHttp.onreadystatechange = function() {
			if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
				i.innerHTML = xmlHttp.responseText;
				setTimeout(update, 1000);
				}
			}					
			xmlHttp.open("GET", 'http://localhost:8080/temp/');
			xmlHttp.send(null);
		}
		
		function monitor() {
			
		}
		
		function take_image() {
			var xmlHttp = new XMLHttpRequest();
			var params = document.getElementById("encoding_selector");
			alert(params.value);
			xmlHttp.open("POST", url+"take_image/"+"?"+params, true);

			xmlHttp.send(null);
		}
		
		function show_hide_options(pane) {
			var x = document.getElementById(pane);
			if(x.style.display === 'none') {
				x.style.display = 'block';
			} else {
				x.style.display = 'none';
			}
		}
		
		function toggle_uv_mode(checked) {
			if(checked) {
				document.getElementById("u_channel").disabled = false;
				document.getElementById("y_channel").disabled = false;
				document.getElementById("encoding").disabled = true;
			} else {
				document.getElementById("u_channel").disabled = true;
				document.getElementById("y_channel").disabled = true;
				document.getElementById("encoding").disabled = false;
			}
		}
	</script>
	<style>
		
		body {
			font-family: "Trebuchet MS", Helvetica, sans-serif;
			background-color:#c4cdd4;
			height: 100%;
		}
		
		form {
			width:800px;
			margin-left: auto;
			margin-right: auto;
		}
		
		header {
			background-color: #24478f;
			color: white;
		}
		
		select {
			width: 100%;
			border: none;
			padding: 5px;
			background-color: white;
		}
		
		option {
			font-size: 20px;
			text-align: center;
		}
		
		.navigation_button_unselected {
			background-color: #2952a3;
			color: white;
			font-size: 16px;
			border: 1px solid #24478f;
			width: 33.333%;
			padding: 16px;
			margin-left: 0px;
			margin-right: -4px;
		}
		
		.navigation_button_selected {
			background-color: white;
			color: #2952a3;
			font-size: 16px;
			border-top: 1px solid #24478f;
			border-left: 1px solid #24478f;
			border-right: 1px solid #24478f;
			border-bottom: 1px solid white;
			width: 33.333%;
			padding: 16px;
			margin-left: 0px;
			margin-right: -5px;
		}
		
		.shooting_modes #selected {
			width:25%;
			margin:-4px;
			background-color: gray;
			color: white;
			border-color: yellow;
		}
		
		.additional_camera_options {
			width: 100%;
			background-color: #2952a3;
			color: white;
			font-size: 16px;
			border: 1px solid #24478f;
			padding: 16px;
			margin: 0%;
		}
		
		.additional_camera_options #next {
			width: 100%;
			background-color: white;
			color: #2952a3;
			font-size: 16px;
			border: 1px solid #24478f;
			padding: 16px;
			margin: 0%;
		}
		
		#camera_status {
			width: 50%;
			height: 100%;
			border: 1px solid black;
			display: inline-block;
			clear: both;
			margin-left: -5px;
			margin-right: -5px;
			vertical-align: top;
			padding-left: 5px;
		}
		
		#camera_options {
			width: 50%;
			display: inline-block;
			margin: -1px;
		}
		
		#main_panel {
			width:800px;
			min-height: 100%;
			margin-left:auto; 
			margin-right:auto;
			background: white;		
		}
		
		#navigation_menu {
			width: 100%;
			background: gray;
		}
		
		#start_camera {
			width: 20%;
			height: 100px;
			position: static;
			margin-right: 0;
			margin-left: 50px;
		}
		
		#output {
			margin-left:auto;
			margin-right:auto;
			width: 100%;
			border: 1px solid black;
		}
		
	</style>
</head>
	<body>
		<div id="main_panel">
			<header>
				<h1>RasPiCam</h1>
			</header>
			
			<div id="navigation_menu">
				<button class="navigation_button_unselected" type="submit" onClick="monitor()">MONITOR</button>
				<button class="navigation_button_selected" type="submit" onClick="photography()">CAMERA</button>
				<button class="navigation_button_unselected" type="submit" onClick="system_info()">SYSTEM INFO</button>
			</div>
			
			<div id="output">
				Output filename
				<input type="text">
				<button id="start_camera" onClick="take_image()">Take Image</button>
			</div>
			
			<div>
				<div id="camera_options">
				<button type="button" class="additional_camera_options" onClick="show_hide_options(camera_modes.id)">Camera Mode</button>
				<div style="display:none;" id="camera_modes">
					<select id="camera_mode">
						<option value="camera_mode">Still Capture</option>
						<option value="camera_mode">Video Capture</option>
						<option value="camera_mode">YUV Capture</option>
						<option value="camera_mode">Timelapse</option>
					</select>
				</div>
				<button type="button" class="additional_camera_options" onClick="show_hide_options(resolution.id)">Resolution</button>
				<div style="display:none;" id="resolution_pane">
					<select id="resolution" class="options">
						<option value="2592x1944">2592 x 1944 (max)</option>
						<option value="2560x1920">2560 x 1920</option>
						<option value="2240x1680">2240 x 1680</option>
						<option value="2048x1536">2048 x 1536</option>
						<option value="1600x1200">1600 x 1200</option>
						<option value="1536x1180">1536 x 1180</option>
						<option value="1280x960">1280 x 960</option>
						<option value="1024x768">1024 x 768</option>
						<option value="800x600">800 x 600</option>
						<option value="640x480">640 x 480</option>
						<option value="320x240">320 x 240</option>
					</select>
				</div>	
				<button class="additional_camera_options" onClick="show_hide_options(encoding.id)">Encoding</button>
				<div style="display:none;" id="encoding_pane">
					<select id="encoding" class="options">
						<option value="jpg">JPG</option>
						<option value="gif">GIF</option>
						<option value="png">PNG</option>
						<option value="bmp">BMP</option>
					</select>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(quality.id)">Quality</button>
				<div style="display:none;" id="quality_pane">
					<input type="number" max="100" min="0" value="75" class="quality" style="width: 3em">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(bayer_data.id)">Bayer Data</button>
				<div style="display:none;" id="bayer_data">
					Add raw Bayer data<input id="raw_bayer" type="checkbox">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(sharpness.id)">Sharpess</button>
				<div style="display:none;" id="sharpness">
					<input type="number" max="100" min="-100" value="0" name="sharpness" style="width: 4em">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(contrast.id)">Contrast</button>
				<div style="display:none;" id="contrast">
					<input type="number" max="100" min="-100" value="0" name="contrast" style="width: 4em">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(brightness.id)">Brightness</button>
				<div style="display:none;" id="brightness">
					<input type="number" max="100" min="0" value="50" name="brightness" style="width: 3em">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(saturation.id)">Saturation</button>
				<div style="display:none;" id="saturation">
					<input type="number" max="100" min="-100" value="0" name="saturation" style="width: 4em">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(iso.id)">ISO</button>
				<div style="display:none;" id="iso">
					<input type="number" max="800" min="100" value="400" name="iso" style="width: 3em">
				</div>
				<button class="additional_camera_options" onClick="vid_stab.id">Video Stabilization</button>
				<div style="display:none;" id="vid_stab">
					Turn on video stabilization<input type="checkbox">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(ev_comp.id)">EV Compensation</button>
				<div style="display:none;" id="ev_comp">
					<input type="number" max="10" min="-10" value="0" name="ev_compensation" style="width: 3em">
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(exposure.id)">Exposure Mode</button>
				<div style="display:none;" id="exposure">
					<select>
						<option value="off">Off</option>
						<option value="auto">Auto</option>
						<option value="night">Night</option>
						<option value="backlight">Backlight</option>
						<option value="spotlight">Spotlight</option>
						<option value="sports">Sports</option>
						<option value="snow">Snow</option>
						<option value="beach">Beach</option>
						<option value="verylong">Very long</option>
						<option value="fixedfps">Fixed FPS</option>
						<option value="antishake">Anti-shake</option>
						<option value="fireworks">Fireworks</option>
					</select>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(aws.id)">Automatic White Balance</button>
				<div style="display:none;" id="aws">
					<select>
						<option value="off">Off</option>
						<option value="auto">Auto</option>
						<option value="sun">Sunny mode</option>
						<option value="cloudshade">Cloudy mode</option>
						<option value="tungsten">Tungsten lighting mode</option>
						<option value="flourescent">Flourescent lighting mode</option>
						<option value="incandescent">Incandescent lighting mode</option>
						<option value="flash">Flash mode</option>
						<option value="horizon">Horizon mode</option>
					</select>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(imfx.id)">Image Effects</button>
				<div style="display:none;" id="imfx">
					<select>
						<option value="none">None</option>
						<option value="negative">Negative</option>
						<option value="solarise">Solarise</option>
						<option value="whiteboard">Whiteboard</option>
						<option value="blackboard">Blackboard</option>
						<option value="sketch">Sketch-style effect</option>
						<option value="denoise">Denoise</option>
						<option value="emboss">Emboss</option>
						<option value="oilpaint">Oilpaint</option>
						<option value="hatch">Cross-hatch sketch style</option>
						<option value="gpen">Graphite sketch style</option>
						<option value="pastel">Pastel</option>
						<option value="watercolour">Watercolour</option>
						<option value="film">Grainy film effect</option>
						<option value="blur">Blur the image</option>
						<option value="saturation">Colour-saturate the image</option>
					</select>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(uv_mode.id)">UV Mode</button>
				<div style="display:none;" id="uv_mode">
					Set camera to UV mode<input type="checkbox" class="uv_mode" name="uv_mode" onclick="toggle_uv_mode(this.checked)"><br>
					Set U:Y channels &nbsp U:<input type="number" max="255" min="0" value="0" id="u_channel" style="width: 3em" disabled> Y:<input type="number" max="255" min="0" value="0" id="y_channel" style="width: 3em" disabled>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(meter_mode.id)">Metering Mode</button>
				<div style="display:none;" id="meter_mode">
					<select id="metering">
						<option value="average">Average</option>
						<option value="spot">Spot</option>
						<option value="backlit">Backlit</option>
						<option value="matrix">Matrix</option>
					</select>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(rot_or.id)">Rotation & Orientation</button>
				<div style="display:none;" id="rot_or">
					Rotation:
					<select id="rotation">
						<option value="0">0</option>
						<option value="90">90</option>
						<option value="180">180</option>
						<option value="270">270</option>
					</select>
					Flip:
					<select>
						<option name="vertical_flip">Vertical
						<option name="horizontal_flip">Horizontal
					</select>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(timelapse.id)">Timelapse</button>
				<div style="display:none;" id="timelapse">
					Interval: <input type="number" value="1" min="0" max="100" disabled><br>
					Time unit:
						<select>
							<option>Seconds</option>
							<option>Minutes</option>
							<option>Hours</option>
						</select>
				</div>
				<button class="additional_camera_options" onClick="show_hide_options(exif_tags.id)">EXIF Tags</button>
				<div style="display:none;" id="exif_tags">

				</div>
			</div>
				<div id="camera_status">
					<p>Camera status</p>
				</div>
			</div>
		</div>
	</body>	
</html>
